\hypertarget{merge__keff_8py_source}{}\doxysection{merge\+\_\+keff.\+py}
\label{merge__keff_8py_source}\index{/Users/Transmutex/Simulation/ADS\_SimulationCode/Dockerfiles/scripts/merge\_keff.py@{/Users/Transmutex/Simulation/ADS\_SimulationCode/Dockerfiles/scripts/merge\_keff.py}}

\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{merge__keff_8py_source_l00001}00001 \textcolor{comment}{\#!/usr/bin/env python3}}
\DoxyCodeLine{\Hypertarget{merge__keff_8py_source_l00002}00002 \textcolor{comment}{\# -\/*-\/ coding: utf-\/8 -\/*-\/}}
\DoxyCodeLine{\Hypertarget{merge__keff_8py_source_l00003}00003 \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{merge__keff_8py_source_l00004}00004 \textcolor{stringliteral}{Created on Thu Jul 29 14:34:37 2021}}
\DoxyCodeLine{\Hypertarget{merge__keff_8py_source_l00005}00005 \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{merge__keff_8py_source_l00006}00006 \textcolor{stringliteral}{@author: tfrosio}}
\DoxyCodeLine{\Hypertarget{merge__keff_8py_source_l00007}00007 \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{merge__keff_8py_source_l00008}00008 }
\DoxyCodeLine{\Hypertarget{merge__keff_8py_source_l00009}00009 \textcolor{keyword}{import} argparse}
\DoxyCodeLine{\Hypertarget{merge__keff_8py_source_l00010}00010 \textcolor{keyword}{import} glob}
\DoxyCodeLine{\Hypertarget{merge__keff_8py_source_l00011}00011 \textcolor{keyword}{import} math}
\DoxyCodeLine{\Hypertarget{merge__keff_8py_source_l00012}00012 \textcolor{keyword}{import} os}
\DoxyCodeLine{\Hypertarget{merge__keff_8py_source_l00013}00013 }
\DoxyCodeLine{\Hypertarget{merge__keff_8py_source_l00014}00014 }
\DoxyCodeLine{\Hypertarget{merge__keff_8py_source_l00017}00017 }
\DoxyCodeLine{\Hypertarget{merge__keff_8py_source_l00018}00018 parser = argparse.ArgumentParser()}
\DoxyCodeLine{\Hypertarget{merge__keff_8py_source_l00019}00019 parser.add\_argument(\textcolor{stringliteral}{'-\/i'}, nargs=\textcolor{stringliteral}{'+'}, required=\textcolor{keyword}{True}, help=\textcolor{stringliteral}{'Provide a list of keff input files to be merged'})}
\DoxyCodeLine{\Hypertarget{merge__keff_8py_source_l00020}00020 parser.add\_argument(\textcolor{stringliteral}{'-\/o'}, required=\textcolor{keyword}{True}, help=\textcolor{stringliteral}{'Output file name'})}
\DoxyCodeLine{\Hypertarget{merge__keff_8py_source_l00021}00021 args = parser.parse\_args()}
\DoxyCodeLine{\Hypertarget{merge__keff_8py_source_l00022}00022 }
\DoxyCodeLine{\Hypertarget{merge__keff_8py_source_l00023}00023 fileName = \textcolor{stringliteral}{"{}root\_keff"{}}}
\DoxyCodeLine{\Hypertarget{merge__keff_8py_source_l00024}00024 }
\DoxyCodeLine{\Hypertarget{merge__keff_8py_source_l00025}00025 }
\DoxyCodeLine{\Hypertarget{merge__keff_8py_source_l00026}00026 }
\DoxyCodeLine{\Hypertarget{merge__keff_8py_source_l00029}00029 }
\DoxyCodeLine{\Hypertarget{merge__keff_8py_source_l00030}00030 \textcolor{keyword}{def }findFiles(path):}
\DoxyCodeLine{\Hypertarget{merge__keff_8py_source_l00031}00031     listFiles = []}
\DoxyCodeLine{\Hypertarget{merge__keff_8py_source_l00032}00032     os.chdir(path)}
\DoxyCodeLine{\Hypertarget{merge__keff_8py_source_l00033}00033     \textcolor{keywordflow}{for} file \textcolor{keywordflow}{in} glob.glob(\textcolor{stringliteral}{"{}*"{}} + fileName + \textcolor{stringliteral}{"{}*"{}}):}
\DoxyCodeLine{\Hypertarget{merge__keff_8py_source_l00034}00034         listFiles.append(path + file)}
\DoxyCodeLine{\Hypertarget{merge__keff_8py_source_l00035}00035     \textcolor{keywordflow}{return} listFiles}
\DoxyCodeLine{\Hypertarget{merge__keff_8py_source_l00036}00036 }
\DoxyCodeLine{\Hypertarget{merge__keff_8py_source_l00037}00037 }
\DoxyCodeLine{\Hypertarget{merge__keff_8py_source_l00038}00038 \textcolor{keyword}{def }readFiles(listFiles):}
\DoxyCodeLine{\Hypertarget{merge__keff_8py_source_l00039}00039     kgen = []}
\DoxyCodeLine{\Hypertarget{merge__keff_8py_source_l00040}00040     kcol = []}
\DoxyCodeLine{\Hypertarget{merge__keff_8py_source_l00041}00041     kabs = []}
\DoxyCodeLine{\Hypertarget{merge__keff_8py_source_l00042}00042     ktrk = []}
\DoxyCodeLine{\Hypertarget{merge__keff_8py_source_l00043}00043     \textcolor{keywordflow}{for} f \textcolor{keywordflow}{in} listFiles:}
\DoxyCodeLine{\Hypertarget{merge__keff_8py_source_l00044}00044         lines = open(f, \textcolor{stringliteral}{"{}r"{}}).readlines()}
\DoxyCodeLine{\Hypertarget{merge__keff_8py_source_l00045}00045         i = 0}
\DoxyCodeLine{\Hypertarget{merge__keff_8py_source_l00046}00046         \textcolor{keywordflow}{while} \textcolor{keywordflow}{not} \textcolor{stringliteral}{"{}================== ACTIVE CYCLES =================="{}} \textcolor{keywordflow}{in} lines[i]:}
\DoxyCodeLine{\Hypertarget{merge__keff_8py_source_l00047}00047             i = i + 1}
\DoxyCodeLine{\Hypertarget{merge__keff_8py_source_l00048}00048         i = i + 1}
\DoxyCodeLine{\Hypertarget{merge__keff_8py_source_l00049}00049         \textcolor{keywordflow}{while} \textcolor{keywordflow}{not} \textcolor{stringliteral}{"{}-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/"{}} \textcolor{keywordflow}{in} lines[i]:}
\DoxyCodeLine{\Hypertarget{merge__keff_8py_source_l00050}00050             kgen.append(float(lines[i].split()[1]))}
\DoxyCodeLine{\Hypertarget{merge__keff_8py_source_l00051}00051             kcol.append(float(lines[i].split()[2]))}
\DoxyCodeLine{\Hypertarget{merge__keff_8py_source_l00052}00052             kabs.append(float(lines[i].split()[3]))}
\DoxyCodeLine{\Hypertarget{merge__keff_8py_source_l00053}00053             ktrk.append(float(lines[i].split()[4]))}
\DoxyCodeLine{\Hypertarget{merge__keff_8py_source_l00054}00054             i = i + 1}
\DoxyCodeLine{\Hypertarget{merge__keff_8py_source_l00055}00055     \textcolor{keywordflow}{return} kgen, kcol, ktrk, kabs}
\DoxyCodeLine{\Hypertarget{merge__keff_8py_source_l00056}00056 }
\DoxyCodeLine{\Hypertarget{merge__keff_8py_source_l00057}00057 }
\DoxyCodeLine{\Hypertarget{merge__keff_8py_source_l00058}00058 \textcolor{keyword}{def }computeMean(vector):}
\DoxyCodeLine{\Hypertarget{merge__keff_8py_source_l00059}00059     summ = 0.}
\DoxyCodeLine{\Hypertarget{merge__keff_8py_source_l00060}00060     \textcolor{keywordflow}{for} elem \textcolor{keywordflow}{in} vector:}
\DoxyCodeLine{\Hypertarget{merge__keff_8py_source_l00061}00061         summ += elem}
\DoxyCodeLine{\Hypertarget{merge__keff_8py_source_l00062}00062     \textcolor{keywordflow}{return} round(summ / len(vector), 6)}
\DoxyCodeLine{\Hypertarget{merge__keff_8py_source_l00063}00063 }
\DoxyCodeLine{\Hypertarget{merge__keff_8py_source_l00064}00064 }
\DoxyCodeLine{\Hypertarget{merge__keff_8py_source_l00065}00065 \textcolor{keyword}{def }computeStd(vector):}
\DoxyCodeLine{\Hypertarget{merge__keff_8py_source_l00066}00066     summ = 0.}
\DoxyCodeLine{\Hypertarget{merge__keff_8py_source_l00067}00067     sumSquare = 0.}
\DoxyCodeLine{\Hypertarget{merge__keff_8py_source_l00068}00068     \textcolor{keywordflow}{for} elem \textcolor{keywordflow}{in} vector:}
\DoxyCodeLine{\Hypertarget{merge__keff_8py_source_l00069}00069         sumSquare += elem * elem}
\DoxyCodeLine{\Hypertarget{merge__keff_8py_source_l00070}00070         summ += elem}
\DoxyCodeLine{\Hypertarget{merge__keff_8py_source_l00071}00071     mean = summ / len(vector)}
\DoxyCodeLine{\Hypertarget{merge__keff_8py_source_l00072}00072     mean2 = sumSquare / len(vector)}
\DoxyCodeLine{\Hypertarget{merge__keff_8py_source_l00073}00073     \textcolor{keywordflow}{return} round(math.sqrt((mean2 -\/ mean * mean) / (len(vector) -\/ 1)), 6)}
\DoxyCodeLine{\Hypertarget{merge__keff_8py_source_l00074}00074 }
\DoxyCodeLine{\Hypertarget{merge__keff_8py_source_l00075}00075 }
\DoxyCodeLine{\Hypertarget{merge__keff_8py_source_l00076}00076 \textcolor{keyword}{def }writeResults(output, kgen, kcol, kabs, ktrk):}
\DoxyCodeLine{\Hypertarget{merge__keff_8py_source_l00077}00077     f = open(output, \textcolor{stringliteral}{"{}w"{}})}
\DoxyCodeLine{\Hypertarget{merge__keff_8py_source_l00078}00078     f.write(\textcolor{stringliteral}{"{}kgen "{}} + str(computeMean(kgen)) + \textcolor{stringliteral}{"{} "{}} + str(computeStd(kgen)) + \textcolor{stringliteral}{"{}\(\backslash\)n"{}})}
\DoxyCodeLine{\Hypertarget{merge__keff_8py_source_l00079}00079     f.write(\textcolor{stringliteral}{"{}kcol "{}} + str(computeMean(kcol)) + \textcolor{stringliteral}{"{} "{}} + str(computeStd(kcol)) + \textcolor{stringliteral}{"{}\(\backslash\)n"{}})}
\DoxyCodeLine{\Hypertarget{merge__keff_8py_source_l00080}00080     f.write(\textcolor{stringliteral}{"{}kabs "{}} + str(computeMean(kabs)) + \textcolor{stringliteral}{"{} "{}} + str(computeStd(kabs)) + \textcolor{stringliteral}{"{}\(\backslash\)n"{}})}
\DoxyCodeLine{\Hypertarget{merge__keff_8py_source_l00081}00081     f.write(\textcolor{stringliteral}{"{}ktrk "{}} + str(computeMean(ktrk)) + \textcolor{stringliteral}{"{} "{}} + str(computeStd(ktrk)) + \textcolor{stringliteral}{"{}\(\backslash\)n"{}})}
\DoxyCodeLine{\Hypertarget{merge__keff_8py_source_l00082}00082 }
\DoxyCodeLine{\Hypertarget{merge__keff_8py_source_l00083}00083 }
\DoxyCodeLine{\Hypertarget{merge__keff_8py_source_l00084}00084 }
\DoxyCodeLine{\Hypertarget{merge__keff_8py_source_l00087}00087 }
\DoxyCodeLine{\Hypertarget{merge__keff_8py_source_l00088}00088 \textcolor{comment}{\# l = readFile(path)}}
\DoxyCodeLine{\Hypertarget{merge__keff_8py_source_l00089}00089 l = args.i}
\DoxyCodeLine{\Hypertarget{merge__keff_8py_source_l00090}00090 kgen, kcol, ktrk, kabs = readFiles(l)}
\DoxyCodeLine{\Hypertarget{merge__keff_8py_source_l00091}00091 }
\DoxyCodeLine{\Hypertarget{merge__keff_8py_source_l00092}00092 writeResults(args.o, kgen, kcol, kabs, ktrk)}
\DoxyCodeLine{\Hypertarget{merge__keff_8py_source_l00093}00093 }
\DoxyCodeLine{\Hypertarget{merge__keff_8py_source_l00094}00094 \textcolor{comment}{\# print("{}kgen"{}, computeMean(kgen), computeStd(kgen))}}
\DoxyCodeLine{\Hypertarget{merge__keff_8py_source_l00095}00095 \textcolor{comment}{\# print("{}kcol"{}, computeMean(kcol), computeStd(kcol))}}
\DoxyCodeLine{\Hypertarget{merge__keff_8py_source_l00096}00096 \textcolor{comment}{\# print("{}kabs"{}, computeMean(kabs), computeStd(kabs))}}
\DoxyCodeLine{\Hypertarget{merge__keff_8py_source_l00097}00097 \textcolor{comment}{\# print("{}ktrk"{}, computeMean(ktrk), computeStd(ktrk))}}

\end{DoxyCode}
