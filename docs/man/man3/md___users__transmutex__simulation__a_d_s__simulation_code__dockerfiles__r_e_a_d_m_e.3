.TH "md___users__transmutex__simulation__a_d_s__simulation_code__dockerfiles__r_e_a_d_m_e" 3 "Fri Oct 15 2021" "Version Version 1.0" "Transmutex Documentation" \" -*- nroff -*-
.ad l
.nh
.SH NAME
md___users__transmutex__simulation__a_d_s__simulation_code__dockerfiles__r_e_a_d_m_e \- README 
The Dockerfiles contains in this folder are linked\&.
.PP
You need to build them in the correct order since there are dependent\&.
.PP
Create Docker image following this order: root -> geant4 -> tmx -> data
.PP
If an image didn't change you don't need to rebuild the previous images\&. For example, if root and geant4 didn't change, you only need to rebuild tmx and data\&.
.PP
root image contain:
.IP "\(bu" 2
environnement variables
.IP "\(bu" 2
the installation of tools for building (g++, libs\&.\&.\&.)
.IP "\(bu" 2
the creation of geant4 user
.IP "\(bu" 2
the installation of root
.PP
.PP
geant4 image contain:
.IP "\(bu" 2
everything from root
.IP "\(bu" 2
the installation of geant4
.PP
.PP
tmx image contain:
.IP "\(bu" 2
everything from geant4
.IP "\(bu" 2
the installation of tmx
.PP
.PP
data image contain:
.IP "\(bu" 2
everything from tmx
.IP "\(bu" 2
the installation of the databases
.PP
.PP
You will only use the europe-west6-docker\&.pkg\&.dev/peerless-garage-319212/docker-registry/data image\&.
.PP
The multistage was a test to reduce the size of the last image\&. After a quick try root was not working well\&.
.PP
Below the command you should launch in the root folder of this repository in order to build the dockerimages\&.
.PP
.PP
.nf
docker build -f Dockerfiles/Dockerfile\&.root -t europe-west6-docker\&.pkg\&.dev/peerless-garage-319212/docker-registry/root \&.
docker push europe-west6-docker\&.pkg\&.dev/peerless-garage-319212/docker-registry/root

docker build -f Dockerfiles/Dockerfile\&.geant4 -t europe-west6-docker\&.pkg\&.dev/peerless-garage-319212/docker-registry/geant4 \&.
docker push europe-west6-docker\&.pkg\&.dev/peerless-garage-319212/docker-registry/geant4

docker build -f Dockerfiles/Dockerfile\&.tmx -t europe-west6-docker\&.pkg\&.dev/peerless-garage-319212/docker-registry/tmx \&.
docker push europe-west6-docker\&.pkg\&.dev/peerless-garage-319212/docker-registry/tmx

# docker build -f Dockerfiles/Dockerfile\&.multistage -t europe-west6-docker\&.pkg\&.dev/peerless-garage-319212/docker-registry/multistage \&.
# docker push europe-west6-docker\&.pkg\&.dev/peerless-garage-319212/docker-registry/multistage

docker build -f Dockerfiles/Dockerfile\&.data -t europe-west6-docker\&.pkg\&.dev/peerless-garage-319212/docker-registry/data \&.
docker push europe-west6-docker\&.pkg\&.dev/peerless-garage-319212/docker-registry/data
.fi
.PP
.PP
.PP
.nf
docker build -f Dockerfiles/root\&.Dockerfile -t europe-west6-docker\&.pkg\&.dev/peerless-garage-319212/docker-registry/root-v2 \&.
docker push europe-west6-docker\&.pkg\&.dev/peerless-garage-319212/docker-registry/root-v2

docker build -f Dockerfiles/geant4\&.Dockerfile -t europe-west6-docker\&.pkg\&.dev/peerless-garage-319212/docker-registry/geant4-v2 \&.
docker push europe-west6-docker\&.pkg\&.dev/peerless-garage-319212/docker-registry/geant4-v2

docker build -f Dockerfiles/geant4-tmx\&.Dockerfile -t europe-west6-docker\&.pkg\&.dev/peerless-garage-319212/docker-registry/geant4-tmx-v2 \&.
docker push europe-west6-docker\&.pkg\&.dev/peerless-garage-319212/docker-registry/geant4-tmx-v2
.fi
.PP
 
