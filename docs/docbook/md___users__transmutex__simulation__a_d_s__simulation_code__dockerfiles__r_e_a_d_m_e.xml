<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<section xmlns="http://docbook.org/ns/docbook" version="5.0" xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="_md___users__transmutex__simulation__a_d_s__simulation_code__dockerfiles__r_e_a_d_m_e" xml:lang="en-US">

<para>The Dockerfiles contains in this folder are linked.</para>

<para>You need to build them in the correct order since there are dependent.</para>

<para>Create Docker image following this order: root -&gt; geant4 -&gt; tmx -&gt; data</para>

<para>If an image didn&apos;t change you don&apos;t need to rebuild the previous images. For example, if root and geant4 didn&apos;t change, you only need to rebuild tmx and data.</para>

<para>root image contain:<itemizedlist>
<listitem>
<para>environnement variables</para>
</listitem><listitem>
<para>the installation of tools for building (g++, libs...)</para>
</listitem><listitem>
<para>the creation of geant4 user</para>
</listitem><listitem>
<para>the installation of root</para>
</listitem></itemizedlist>
</para>

<para>geant4 image contain:<itemizedlist>
<listitem>
<para>everything from root</para>
</listitem><listitem>
<para>the installation of geant4</para>
</listitem></itemizedlist>
</para>

<para>tmx image contain:<itemizedlist>
<listitem>
<para>everything from geant4</para>
</listitem><listitem>
<para>the installation of tmx</para>
</listitem></itemizedlist>
</para>

<para>data image contain:<itemizedlist>
<listitem>
<para>everything from tmx</para>
</listitem><listitem>
<para>the installation of the databases</para>
</listitem></itemizedlist>
</para>

<para>You will only use the europe-west6-docker.pkg.dev/peerless-garage-319212/docker-registry/data image.</para>

<para>The multistage was a test to reduce the size of the last image. After a quick try root was not working well.</para>

<para>Below the command you should launch in the root folder of this repository in order to build the dockerimages.</para>

<para><literallayout><computeroutput>docker&#32;build&#32;-f&#32;Dockerfiles/Dockerfile.root&#32;-t&#32;europe-west6-docker.pkg.dev/peerless-garage-319212/docker-registry/root&#32;.
docker&#32;push&#32;europe-west6-docker.pkg.dev/peerless-garage-319212/docker-registry/root

docker&#32;build&#32;-f&#32;Dockerfiles/Dockerfile.geant4&#32;-t&#32;europe-west6-docker.pkg.dev/peerless-garage-319212/docker-registry/geant4&#32;.
docker&#32;push&#32;europe-west6-docker.pkg.dev/peerless-garage-319212/docker-registry/geant4

docker&#32;build&#32;-f&#32;Dockerfiles/Dockerfile.tmx&#32;-t&#32;europe-west6-docker.pkg.dev/peerless-garage-319212/docker-registry/tmx&#32;.
docker&#32;push&#32;europe-west6-docker.pkg.dev/peerless-garage-319212/docker-registry/tmx

#&#32;docker&#32;build&#32;-f&#32;Dockerfiles/Dockerfile.multistage&#32;-t&#32;europe-west6-docker.pkg.dev/peerless-garage-319212/docker-registry/multistage&#32;.
#&#32;docker&#32;push&#32;europe-west6-docker.pkg.dev/peerless-garage-319212/docker-registry/multistage

docker&#32;build&#32;-f&#32;Dockerfiles/Dockerfile.data&#32;-t&#32;europe-west6-docker.pkg.dev/peerless-garage-319212/docker-registry/data&#32;.
docker&#32;push&#32;europe-west6-docker.pkg.dev/peerless-garage-319212/docker-registry/data
</computeroutput></literallayout></para>

<para><literallayout><computeroutput>docker&#32;build&#32;-f&#32;Dockerfiles/root.Dockerfile&#32;-t&#32;europe-west6-docker.pkg.dev/peerless-garage-319212/docker-registry/root-v2&#32;.
docker&#32;push&#32;europe-west6-docker.pkg.dev/peerless-garage-319212/docker-registry/root-v2

docker&#32;build&#32;-f&#32;Dockerfiles/geant4.Dockerfile&#32;-t&#32;europe-west6-docker.pkg.dev/peerless-garage-319212/docker-registry/geant4-v2&#32;.
docker&#32;push&#32;europe-west6-docker.pkg.dev/peerless-garage-319212/docker-registry/geant4-v2

docker&#32;build&#32;-f&#32;Dockerfiles/geant4-tmx.Dockerfile&#32;-t&#32;europe-west6-docker.pkg.dev/peerless-garage-319212/docker-registry/geant4-tmx-v2&#32;.
docker&#32;push&#32;europe-west6-docker.pkg.dev/peerless-garage-319212/docker-registry/geant4-tmx-v2
</computeroutput></literallayout> </para>
</section>
